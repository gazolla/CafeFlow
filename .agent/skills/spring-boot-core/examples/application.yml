# =============================================================================
# Main application configuration â€” shared across all profiles
# =============================================================================

spring:
  application:
    name: my-app

  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  # Jackson (JSON serialization)
  jackson:
    serialization:
      write-dates-as-timestamps: false
    default-property-inclusion: non_null
    date-format: yyyy-MM-dd'T'HH:mm:ss.SSS'Z'

# Server
server:
  port: ${PORT:8080}
  error:
    include-message: always
    include-binding-errors: always
  compression:
    enabled: true
    mime-types: application/json,text/html,text/plain
    min-response-size: 1024

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      show-details: when_authorized
  info:
    env:
      enabled: true

# Application custom properties (bound to AppProperties.java)
app:
  name: ${spring.application.name}
  api:
    base-url: ${API_BASE_URL:https://api.example.com}
    timeout: ${API_TIMEOUT:30s}
    retry-attempts: ${API_RETRY:3}
  cors:
    allowed-origins:
      - ${CORS_ORIGIN:http://localhost:3000}

# Logging
logging:
  level:
    root: INFO
    com.example.app: ${LOG_LEVEL:INFO}
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
